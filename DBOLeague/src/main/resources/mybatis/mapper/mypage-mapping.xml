<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dao.MypageDAO">

<!-- 닉네임 변경 -->
<update id="updateMemberNick" parameterType="memberDto">
	update member set member_nick = #{member_nick}
	where member_id = #{member_id}
</update>

<!-- 비밀번호 변경 -->
<update id="updateMemberPw" parameterType="memberDto">
	update member set member_pw = #{member_pw}
	where member_id = #{member_id}
</update>

<!-- 회원탈퇴 -->
<delete id="deleteMember" parameterType="String">
	delete from member where member_id = #{member_id}
</delete>

<!-- 회원이 경험치를 얻은(0포함) 최근 5개 게임id, 날짜 얻기 -->
<select id="selectMemberLatestExp" parameterType="String" resultType="expDto">
	select single_id, exp_date from exp 
	where member_id = #{member_id}
	order by exp_date desc
	limit 5
</select>
 
<!-- 회원의 최근 5게임 성공여부, 총 진행 횟수 얻기-->
<select id="selectMemberLatestSingleResult" parameterType="hashmap" resultType="singleDto">
 	select single_result, single_all from single
 	where member_id = #{member_id} and
 	single_id in 
 	(<foreach collection="" separator="," item="single_id">
	 	#{single_id}
 	</foreach>)
</select>

<!--  -->


</mapper>






